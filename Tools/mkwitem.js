function initTable() {
    // Player count options
    const playerSelectElem = document.getElementById("selectPlayerCount");

    for (const playerCount in ITEM_TABLE) {
        const playerElem = document.createElement("option");
        playerElem.setAttribute("value", playerCount);
        playerElem.innerHTML = playerCount;

        playerSelectElem.appendChild(playerElem);
    }

    playerSelectElem.value = 10;

    updateTable();
}

function updateTable() {
    const tableElem = document.getElementById("tableItem");

    // Delete old entries
    while (tableElem.rows.length > 1) {
        tableElem.deleteRow(-1);
    }

    const playerSelectElem = document.getElementById("selectPlayerCount");
    const playerCount = playerSelectElem.value;

    let items = structuredClone(ITEM_TABLE[playerCount]);
    let maxProbs = [];

    for (let i = 0; i < ITEM_COUNT; i++) {
        let maxProb = 0;

        for (let j = 0; j < items.length; j++) {
            const itemPerc = items[j][i];

            if (itemPerc >= maxProb) {
                maxProb = itemPerc;
            }
        }

        maxProbs.push(maxProb);
    }

    for (let i = 0; i < items.length; i++) {
        const rowElem = document.createElement("tr");
        tableElem.appendChild(rowElem);

        const posElem = document.createElement("td");   
        rowElem.appendChild(posElem);

        posElem.innerHTML = (i + 1).toString();
        posElem.style.textAlign = "right";

        for (let j = 0; j < items[i].length; j++) {
            const itemPerc = items[i][j];

            const itemElem = document.createElement("td");
            rowElem.appendChild(itemElem);

            itemElem.innerHTML = `${itemPerc}%`;
            itemElem.style.textAlign = "right";

            if (itemPerc > 0) {
                const COLOR_LOW = [255, 255, 255];
                const COLOR_HIGH = [200, 0, 0];

                const interpolation = itemPerc / maxProbs[j];
                const color = [
                    Math.round(COLOR_LOW[0] * (1 - interpolation) + COLOR_HIGH[0] * interpolation),
                    Math.round(COLOR_LOW[1] * (1 - interpolation) + COLOR_HIGH[1] * interpolation),
                    Math.round(COLOR_LOW[2] * (1 - interpolation) + COLOR_HIGH[2] * interpolation)
                    ];
                const colorStr =  `#${color[0].toString(16).padStart(2, "0")}${color[1].toString(16).padStart(2, "0")}${color[2].toString(16).padStart(2, "0")}`;
                itemElem.style.backgroundColor = colorStr;
            }
        }
    } 
}

const ITEM_COUNT = 19;

const ITEM_TABLE = {
    2: [
        [32.5,  0, 37.5,  20,    0, 0, 0,   0, 0, 0, 0,   0, 0, 0,   0, 0,  0,  0,  10],
        [ 7.5, 20,  2.5, 2.5, 22.5, 5, 5, 2.5, 0, 0, 0, 2.5, 0, 0, 7.5, 0, 10, 10, 2.5]
    ],
    3: [
        [32.5,  0, 37.5,   20,       0,  0,   0,   0, 0, 0,   0,  0,   0, 0,   0, 0,  0,  0, 10],
        [  15, 25,  7.5,    5,    17.5,  0, 2.5,   0, 0, 0,   0,  0,   0, 0, 2.5, 0, 10,  5, 10],
        [   0, 10,     0,   0,    12.5, 15, 7.5, 7.5, 0, 0, 2.5, 10, 7.5, 5, 7.5, 0,  5, 10,  0]
    ],
    4: [
        [32.5,  0, 37.5, 20,    0,    0,   0,   0, 0,  0,    0,  0,   0, 0,   0,   0,  0,  0, 10],
        [  15, 25,  7.5,  5, 17.5,    0, 2.5,   0, 0,  0,    0,  0,   0, 0, 2.5,   0, 10,  5, 10],
        [   0, 10,    0,  0, 12.5,   15, 7.5, 7.5, 0,  0,  2.5, 10, 7.5, 5, 7.5,   0,  5, 10,  0],
        [   0,  0,    0,  0,    0, 37.5,   0, 2.5, 0, 20, 27.5,  0,   5, 5,   0, 2.5,  0,  0,  0]
    ],
    5: [
        [32.5,  0, 37.5, 20,    0,  0,   0,   0, 0,    0,  0,   0,   0,   0,   0,   0,   0,   0, 10],
        [  15, 25,  7.5,  5, 17.5,  0, 2.5,   0, 0,    0,  0,   0,   0,   0, 2.5,   0,  10,   5, 10],
        [   5, 15,    0,  0,   15, 10, 7.5,   5, 0,    0,  0, 7.5,   5,   5, 7.5,   0, 7.5,  10,  0],
        [   0,  5,    0,  0,   10, 25,   5, 7.5, 0,    0, 10, 7.5, 7.5, 7.5,   5,   0, 2.5, 7.5,  0],
        [   0,  0,    0,  0,    0, 30,   0,   0, 0, 27.5, 35,   0,   0,   0,   0, 7.5,   0,   0,  0]
    ],
    6: [
        [32.5,  0, 37.5, 20,    0,    0,   0,   0,   0,    0,    0,   0,   0,   0,   0,    0,   0,   0, 10],
        [  15, 25,  7.5,  5, 17.5,    0, 2.5,   0,   0,    0,    0,   0,   0,   0, 2.5,    0,  10,   5, 10],
        [   5, 15,    0,  0,   15,   10, 7.5,   5,   0,    0,    0, 7.5,   5,   5, 7.5,    0, 7.5,  10,  0],
        [   0,  5,    0,  0,   10,   25,   5, 7.5,   0,    0,   10, 7.5, 7.5, 7.5,   5,    0, 2.5, 7.5,  0],
        [   0,  0,    0,  0,    0, 37.5,   0, 2.5,   0,   20, 27.5,   0,   5,   5,   0,  2.5,   0,   0,  0],
        [   0,  0,    0,  0,    0, 12.5,   0,   0, 7.5, 27.5,   30,   0,   0,   0,   0, 22.5,   0,   0,  0]
    ],
    7: [
        [32.5,  0, 37.5, 20,    0,    0,   0,   0,  0,    0,    0,   0,   0,   0,   0,   0,   0,   0, 10],
        [  15, 25,  7.5,  5, 17.5,    0, 2.5,   0,  0,    0,    0,   0,   0,   0, 2.5,   0,  10,   5, 10],
        [   5, 15,    0,  0,   15,   10, 7.5,   5,  0,    0,    0, 7.5,   5,   5, 7.5,   0, 7.5,  10,  0],
        [   0,  5,    0,  0,   10,   25,   5, 7.5,  0,    0,   10, 7.5, 7.5, 7.5,   5,   0, 2.5, 7.5,  0],
        [   0,  0,    0,  0,    0, 37.5,   0, 2.5,  0,   20, 27.5,   0,   5,   5,   0, 2.5,   0,   0,  0],
        [   0,  0,    0,  0,    0,   30,   0,   0,  0, 27.5,   35,   0,   0,   0,   0, 7.5,   0,   0,  0],
        [   0,  0,    0,  0,    0,    5,   0,   0, 20, 17.5, 22.5,   0,   0,   0,   0,  35,   0,   0,  0]
    ],
    8: [
        [32.5,  0, 37.5,  20,    0,    0,   0,   0,  0,    0,    0,   0,   0,   0,   0,   0,   0,   0,   10],
        [17.5, 25,   20, 7.5, 12.5,    0,   0,   0,  0,    0,    0,   0,   0,   0,   0,   0,   5,   0, 12.5],
        [ 7.5, 20,  2.5, 2.5, 22.5,    5,   5, 2.5,  0,    0,    0, 2.5,   0,   0, 7.5,   0,  10,  10,  2.5],
        [   0, 10,    0,   0, 12.5,   15, 7.5, 7.5,  0,    0,  2.5,  10, 7.5,   5, 7.5,   0,   5,  10,    0],
        [   0,  5,    0,   0,   10,   25,   5, 7.5,  0,    0,   10, 7.5, 7.5, 7.5,   5,   0, 2.5, 7.5,    0],
        [   0,  0,    0,   0,    0, 37.5,   0, 2.5,  0,   20, 27.5,   0,   5,   5,   0, 2.5,   0,   0,    0],
        [   0,  0,    0,   0,    0,   30,   0,   0,  0, 27.5,   35,   0,   0,   0,   0, 7.5,   0,   0,    0],
        [   0,  0,    0,   0,    0,    5,   0,   0, 20, 17.5, 22.5,   0,   0,   0,   0,  35,   0,   0,    0]
    ],   
    9: [
        [32.5,   0, 37.5,  20,    0,    0,   0,   0,   0,    0,    0,   0,   0,   0,   0,    0,   0,   0,   10],
        [17.5,  25,   20, 7.5, 12.5,    0,   0,   0,   0,    0,    0,   0,   0,   0,   0,    0,   5,   0, 12.5],
        [ 7.5,  20,  2.5, 2.5, 22.5,    5,   5, 2.5,   0,    0,    0, 2.5,   0,   0, 7.5,    0,  10,  10,  2.5],
        [   5,  15,    0,   0,   15,   10, 7.5,   5,   0,    0,    0, 7.5,   5,   5, 7.5,    0, 7.5,  10,    0],
        [   0,   5,    0,   0,   10,   25,   5, 7.5,   0,    0,   10, 7.5, 7.5, 7.5,   5,    0, 2.5, 7.5,    0],
        [   0, 2.5,    0,   0,    0, 32.5,   0,   5,   0, 12.5, 22.5,   5,   5,   5,   5,    0,   0,   5,    0],
        [   0,   0,    0,   0,    0, 37.5,   0, 2.5,   0,   20, 27.5,   0,   5,   5,   0,  2.5,   0,   0,    0],
        [   0,   0,    0,   0,    0, 12.5,   0,   0, 7.5, 27.5,   30,   0,   0,   0,   0, 22.5,   0,   0,    0],
        [   0,   0,    0,   0,    0,    5,   0,   0,  20, 17.5, 22.5,   0,   0,   0,   0,   35,   0,   0,    0]
    ],
    10: [
        [32.5,   0, 37.5,  20,    0,    0,   0,   0,   0,    0,    0,   0,   0,   0,   0,    0,   0,   0,   10],
        [17.5,  25,   20, 7.5, 12.5,    0,   0,   0,   0,    0,    0,   0,   0,   0,   0,    0,   5,   0, 12.5],
        [  15,  25,  7.5,   5, 17.5,    0, 2.5,   0,   0,    0,    0,   0,   0,   0, 2.5,    0,  10,   5,   10],
        [   5,  15,    0,   0,   15,   10, 7.5,   5,   0,    0,    0, 7.5,   5,   5, 7.5,    0, 7.5,  10,    0],
        [   0,  10,    0,   0, 12.5,   15, 7.5, 7.5,   0,    0,  2.5,  10, 7.5,   5, 7.5,    0,   5,  10,    0],
        [   0,   5,    0,   0,   10,   25,   5, 7.5,   0,    0,   10, 7.5, 7.5, 7.5,   5,    0, 2.5, 7.5,    0],
        [   0, 2.5,    0,   0,    0, 32.5,   0,   5,   0, 12.5, 22.5,   5,   5,   5,   5,    0,   0,   5,    0],
        [   0,   0,    0,   0,    0,   30,   0,   0,   0, 27.5,   35,   0,   0,   0,   0,  7.5,   0,   0,    0],
        [   0,   0,    0,   0,    0, 12.5,   0,   0, 7.5, 27.5,   30,   0,   0,   0,   0, 22.5,   0,   0,    0],
        [   0,   0,    0,   0,    0,    5,   0,   0,  20, 17.5, 22.5,   0,   0,   0,   0,   35,   0,   0,    0]
    ],
    11: [
        [32.5,   0, 37.5,  20,    0,    0,   0,   0,   0,    0,    0,   0,   0,   0,   0,    0,   0,   0,   10],
        [17.5,  25,   20, 7.5, 12.5,    0,   0,   0,   0,    0,    0,   0,   0,   0,   0,    0,   5,   0, 12.5],
        [  15,  25,  7.5,   5, 17.5,    0, 2.5,   0,   0,    0,    0,   0,   0,   0, 2.5,    0,  10,   5,   10],
        [ 7.5,  20,  2.5, 2.5, 22.5,    5,   5, 2.5,   0,    0,    0, 2.5,   0,   0, 7.5,    0,  10,  10,  2.5],
        [   5,  15,    0,   0,   15,   10, 7.5,   5,   0,    0,    0, 7.5,   5,   5, 7.5,    0, 7.5,  10,    0],
        [   0,   5,    0,   0,   10,   25,   5, 7.5,   0,    0,   10, 7.5, 7.5, 7.5,   5,    0, 2.5, 7.5,    0],
        [   0, 2.5,    0,   0,    0, 32.5,   0,   5,   0, 12.5, 22.5,   5,   5,   5,   5,    0,   0,   5,    0],
        [   0,   0,    0,   0,    0, 37.5,   0, 2.5,   0,   20, 27.5,   0,   5,   5,   0,  2.5,   0,   0,    0],
        [   0,   0,    0,   0,    0,   30,   0,   0,   0, 27.5,   35,   0,   0,   0,   0,  7.5,   0,   0,    0],
        [   0,   0,    0,   0,    0, 12.5,   0,   0, 7.5, 27.5,   30,   0,   0,   0,   0, 22.5,   0,   0,    0],
        [   0,   0,    0,   0,    0,    5,   0,   0,  20, 17.5, 22.5,   0,   0,   0,   0,   35,   0,   0,    0]
    ],
    12: [
        [32.5,   0, 37.5,  20,    0,    0,   0,   0,   0,    0,    0,   0,   0,   0,   0,    0,   0,   0,   10],
        [17.5,  25,   20, 7.5, 12.5,    0,   0,   0,   0,    0,    0,   0,   0,   0,   0,    0,   5,   0, 12.5],
        [  15,  25,  7.5,   5, 17.5,    0, 2.5,   0,   0,    0,    0,   0,   0,   0, 2.5,    0,  10,   5,   10],
        [ 7.5,  20,  2.5, 2.5, 22.5,    5,   5, 2.5,   0,    0,    0, 2.5,   0,   0, 7.5,    0,  10,  10,  2.5],
        [   5,  15,    0,   0,   15,   10, 7.5,   5,   0,    0,    0, 7.5,   5,   5, 7.5,    0, 7.5,  10,    0],
        [   0,  10,    0,   0, 12.5,   15, 7.5, 7.5,   0,    0,  2.5,  10, 7.5,   5, 7.5,    0,   5,  10,    0],
        [   0,   5,    0,   0,   10,   25,   5, 7.5,   0,    0,   10, 7.5, 7.5, 7.5,   5,    0, 2.5, 7.5,    0],
        [   0, 2.5,    0,   0,    0, 32.5,   0,   5,   0, 12.5, 22.5,   5,   5,   5,   5,    0,   0,   5,    0],
        [   0,   0,    0,   0,    0, 37.5,   0, 2.5,   0,   20, 27.5,   0,   5,   5,   0,  2.5,   0,   0,    0],
        [   0,   0,    0,   0,    0,   30,   0,   0,   0, 27.5,   35,   0,   0,   0,   0,  7.5,   0,   0,    0],
        [   0,   0,    0,   0,    0, 12.5,   0,   0, 7.5, 27.5,   30,   0,   0,   0,   0, 22.5,   0,   0,    0],
        [   0,   0,    0,   0,    0,    5,   0,   0,  20, 17.5, 22.5,   0,   0,   0,   0,   35,   0,   0,    0]
    ]
};
